<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.teamone.ownit.mapper.OrderMapper">

































































































<!-- 박주닮 101번 라인 -->
	<!-- 상품 정보를 가져오는 구문 -->
	<select id="productDetail" resultType="com.teamone.ownit.vo.ProductVO">
		SELECT 
			* FROM product
			WHERE product_idx=#{product_idx}
		
	</select>
	<!-- 상품에대한 이미지를 가져오는 구문 -->
	<select id="selectDetailImage" resultType="com.teamone.ownit.vo.ImageVO">
		SELECT * FROM image
			WHERE image_idx=#{product_idx}
	</select>
	<!-- 맴버의 정보, 주소, 계좌를 가져오는 구문 -->
	<select id="selectMemberDetail" resultType="com.teamone.ownit.vo.MemberAddressAccountVO">
		SELECT
			member.member_idx,
			account_idx,
			member_name, 
		    member_phone, 
		    account_bank, 
		    account_num, 
		    account_owner_name, 
		    address1,
		    address2
				FROM 
					member, 
					account, 
					address
		WHERE member_id=#{sId}
        AND address_gb = 0
        AND account_gb = 0
        AND member.member_idx = address.member_idx
        AND member.member_idx = account.member_idx;
	</select>
	
	<!-- order_sell 테이블 insert작업 -->
	<insert id="insertOrderSell">
		INSERT INTO order_sell
			VALUES(
				null,
				#{product_idx},
				#{member_idx},
				#{account_idx},
				'0',
				date_format(now(),"%y-%m-%d %H:%i:%S")
			);
	</insert>



















































</mapper> <!-- 200번 라인 맞추기 -->
